\chapter{Activiti BPM}\label{chp:activiti-bpm}

Criado em 2010 por ex-integrantes do projeto jBPM, o Activiti BPM é um projeto de código aberto sob a licença Apache, que provê um motor BPM leve, estável e fácil de integrar em diferentes tipos de aplicações de ambientes. Ele utiliza a especificação BPMN 2.0. O Activiti é desenvolvido sob a linguagem de programação Java e é facilmente integrável com aplicações existentes por sua leveza e API amigável.%Isso entra la no ultimo cap: A versão 5.19 foi utilizada neste trabalho.

Neste capítulo vamos apresentar como o Activiti BPM pode ser utilizado na automatização de processos de negócio. Vamos apresentar ainda, a capacidade de modelagem de processos através da notação BPMN utilizada pelo Activiti. Por último vamos abordar as vantagens e limitações desta ferramenta frente às demais opções do mercado.

\section{Arquitetura}\label{sec:automatizacao_processos-gestao_processos}


O Activiti é constituído através de diversos componentes que possibilitam o aproveitamento do ecossistema BPM. Com exceção do Activiti Engine, pois este constitui o módulo principal da ferramenta, todos os demais módulos são opcionais e dependem do cenário de utilização do BPMS.

\begin{figure}[H]
\centering
\includegraphics[width=0.9\textwidth]{imagens/activiti_architecture.png}
\caption{Arquitetura do Activiti BPM}
\label{fig:activiti_architecture}
\end{figure}

\subsection{Componentes}\label{sec:automatizacao_processos-gestao_processos_componentes}

O Activiti Engine é o componente principal, pois nele estão presentes o motor de funcionamento do BPM e as APIs para acesso e controle da ferramenta. Este componente é disponibilizado através de um simples arquivo JAR, modelo de arquivo padrão para bibliotecas da linguaguem Java. Sendo assim, o motor BPM pode ser facilmente utilizado em diferentes projetos Java através da inclusão dessa biblioteca como dependência.

Além da API Java, que está incluída no motor BPM, o Activiti REST API disponibiliza um acesso às funcionalidades principais do Activiti através de uma interface REST. Isso simplifica o acesso às suas funcionalidades e facilita a construção das mais variadas aplicações de interface com o usuário, como por exemplo, aplicações móveis.

O Activiti Designer, é um plugin criado para a interface de desenvolvimento Eclipse, que permite ao analista ou desenvolvedor modelar processos na notação BPMN graficamente, ao mesmo tempo em que é gerado automaticamente a notação do processo em XML.

O Activiti Explorer é a interface web padrão com o usuário, disponibilizada para o controle e execução de processos. Através dessa interface, o usuário pode instalar novas definições de processos, iniciar ou cancelar processos, finalizar ou delegar tarefas.

\subsection{Requisitos de software}\label{sec:automatizacao_processos-gestao_processos_requisitos}

O Activiti exige um ambiente Java JDK versão 6 ou superior para seu correto funcionamento. Além do ambiente Java configurado, também é necessário um banco de dados para suportar a persistência das informações dos processos. Uma variedade de bancos é suportada pelo BPMS, são eles: H2, MySQL, Oracle, Postgres, DB2 e SQL Server.


\section{Como automatizar um processo?}\label{sec:automatizacao_processos-automatizar_processo}

Nesta seção, iremos detalhar uma abordagem simplificada, porém suficiente para ilustrar os passos necessários para a automatização de um processo de negócio na ferramenta.  O processo de negócio utilizado como base é o mesmo apresentado na seção de introdução deste trabalho.

\subsection{Preparação do Ambiente}\label{sec:automatizacao_processos-automatizar_processo_preparacao_ambiente}

O primeiro passo necessário é a preparação do ambiente de execução do BPM. Para isso, existem duas possibilidades principais. A primeira opção é a inclusão da dependência do Activiti BPM em um projeto Java web específico, e posterior construção do pacote WAR para execução em um servidor Java web. Outra opção, mais simples e que será utilizada nesta demonstração, é a utilização de um pacote WAR pronto para funcionamento, disponibilizado diretamente no site da ferramenta (www.activiti.org).

O arquivo disponibilizado no portal da ferramenta já inclui o Activiti Engine e o Activiti Explorer num único pacote, pré-configurados com um banco de dados em memória H2 que dá suporte ao seu funcionamento e não requer nenhuma configuração adicional. Para iniciar a execução do BPMS, basta a instalação do artefato em um servidor Java web como o Apache Tomcat 7.

Após a instalação do artefato e inicialização do Tomcat, o portal pode ser acessado através do endereço http://127.0.0.1:8080/activiti-explorer, dado que o Tomcat tenha sido instalado na sua configuração padrão. O usuário e senha padrão para acesso ao portal como administrador é kermit.

\subsection{Modelagem do Processo}\label{sec:automatizacao_processos-automatizar_processo_modelagem}

Para a modelagem do processo, é necessária a instalação do plugin Activiti Designer na ferramenta de desenvolvimento Eclipse. Mais detalhes sobre como proceder com a instalação do plugin estão disponíveis no portal do Activiti.

Ao criar um novo diagrama através da opção Activiti Diagram, o Activiti Designer cria um arquivo .bpmn e disponibiliza duas visões para a modelagem do processo. Uma aba visual, contendo o desenho do processo, e outra aba textual, com a notação em XML. Ambas as abas estão interligadas e podem ser utilizadas para a modelagem, sendo a visual mais utilizada pela simplicidade de construção.

Para a modelagem do processo na paleta visual, é necessário arrastar os componentes visuais dispostos na aba lateral a fim de obter a modelagem desejada do processo na notação BPMN.

Ao final da modelagem, o arquivo .BPMN é gerado para ser utilizado na instalação do processo no motor de processos.

\begin{figure}[H]
\centering
\includegraphics[width=1.0\textwidth]{imagens/ProcessoDePrecificacao}
\caption{Processo modelado no Activiti BPM}
\label{fig:processo_precificacao}
\end{figure}

\subsection{Instalação do Processo}\label{sec:automatizacao_processos-automatizar_processo_modelagem}

\subsection{Execução do Processo}\label{sec:automatizacao_processos-automatizar_processo_modelagem}

\section{Vantagens e Limitações}\label{sec:automatizacao_processos-vantagens_limitacoes}


1) http://searchcio.techtarget.com/definition/Business-Process-Modeling-Notation

2) http://blog.iprocess.com.br/2012/11/um-guia-para-iniciar-estudos-em-bpmn-i-atividades-e-sequencia

3) https://www.fluig.com/blog/entendendo-melhor-o-bpmn/

4) http://www.devmedia.com.br/introducao-ao-business-process-modeling-notation-bpmn/29892

5) http://blog.goodelearning.com/bpmn/common-bpmn-modeling-mistakes-best-practices-basic-events/